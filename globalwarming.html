<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Warming - The Game</title>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="terrain.css">
</head>
<body>

<main>
  <section id=board>
  </section>

  <!-- section id=menu>
    <nav>
      <button id=edit>edit</button>
      <button id=play>play</button>
    </nav>
  </section -->

  <section id=controls>
    <img src=img/logo.svg>
    <img src=img/controls/happyometer.svg>
    <img src=img/controls/goldcoin.svg>
    <div id=energy-meter>
      <img src=img/controls/skull.svg>
      <div id=mix>
        <div class=fossil-value></div>
        <div class=renewable-value> </div>
        <div class=blank-value> </div>
      </div>
      <img src=img/controls/sun.svg>
    </div>
  </section>
</main>  


<script src=Place.js></script>

<script>

  

</script>
<script src=Item.js></script>
<script src=Board.js></script>
<script src=Game.js></script>

<script>
let small = `
ggc
ccc
cfc
`
let big = `
ghggggggcccccccccccc
ccfccmcccccccccccccc
ccfccmcccccccccccccc
ccfccmcccccccccccccc
ccfccmcccccccccccccc
ccfccccccccccccccccc
cccccccccccccccccccc
ccccccggcccccccccccc
ccccccggcccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
cccccccccccccccccccc
`

let parsePattern = pattern => 
pattern
  .trim()
  .split(`\n`)
   .map(line => line.split('')
     .map(code => ({
       "c": "concrete",
       "g": "grass",
     
       "h": "house",
       "m": "community_center",
       "t": "tree",
     
       "f": "factory",
       "n": "natural_gas",
       "l": "coal",
       "o": "oil"
     }[code]))
   );

m = parsePattern(small);

m = m.map((rows,y) => {
  return rows.map((columns, x) => {
    let code = m[x][y];
    let data = {x,y,terrain:m[x][y], items:[]}
    switch(data.terrain){
      case "factory":
        data.terrain = "concrete";
        data.items.push(new Item({name: "factory", alignment:"bad"}))
        break;
      case "oil":
        data.terrain = "concrete";
        data.items.push(new Item({name: "oil", alignment:"bad"}))
        break;
      case "community_center":
        data.terrain = "grass";
        data.items.push(new Item({name: "community_center", alignment:"good"}))
        break;
      case "house":
        data.terrain = "grass";
        data.items.push(new Item({name: "house", alignment:"good"}))
        break;
    }
    return new Place(data)
  })
})

let board = new Board({
    dimensions:{columns:20,rows:20},
    tileSize: {x:100,y:100}, 
    matrix: m
});

let game = new Game({board});

</script>
</body>
</html>
